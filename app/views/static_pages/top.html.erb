<div id="loading" class="w-screen h-screen bg-gray-300 z-50 fixed bg-opacity-75 text-center">
    <i class="fas fa-volume-up text-6xl" id="volume-up-icon"></i>
    <h1>音楽が再生されます</h1>
    <h2 class="inline cursor-pointer" id="music-on">ON</h2><h2 class="inline"> / </h2><h2 class="inline cursor-pointer" id="music-off">OFF</h2><br>
</div>
<div class="h-60vh bg-orange-gradation relative">
    <div>
        <%= link_to 'memopic', root_path, class: 'font-serif-sc text-5xl ml-4 md:ml-10 text-black' %>
        <span class='text-xs md:text-xl float-right mr-2 md:mr-6 my-8 md:my-6 text-black'>使い方は<%= link_to 'こちら', howto_path %></span>
    </div>
    <div class="text-center inline-block text-2xl md:text-5xl font-noto-sans-jp-bold catch-copy absolute">
        旅の思い出を<br>プレイリストで振り返ろう
    </div>
    <div class="inline-block text-xs md:text-lg font-noto-sans-jp description absolute">
        旅行中ドライブで聴いてた曲<br>
        あの時流行っていた、好きだった曲から<br>
        思い出を振り返ってみませんか？<br>
        <span class="font-serif-sc">memopic</span> はプレイリストで旅を記録する
        <br>
        新しいサービスです
    </div>
    <i class="fas text-3xl cursor-pointer" id="audio-button"></i>
    <%= audio_tag("driving.mp3", id: "top-page-audio", loop: true ) %>
    <picture>
        <source media="(max-width: 480px)" srcset="/assets/index_page_phone.webp">
        <img class="absolute index-page-preview" src="/assets/index_page_pc.webp">
    </picture>
</div>
<div class="h-40vh text-center text-2xl">
    <div class="top-links relative">
        <a href="/albums" class="button-use-memopic border rounded-full p-4 font-noto-sans-jp text-black">
            <span class="font-serif-sc">memopic</span> を使ってみる
        </a>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.4.1.js"></script>
<script>
function hideAnnounce(){
    $('#loading').hide(500);
}
$(function () {
    let bgm = $("#top-page-audio").get(0)
    bgm.volume = 0.1;
    $('#audio-button').on('click', function(){
        if($(this).hasClass('fa-volume-up')){
            bgm.pause();
            $(this).removeClass('fa-volume-up');
            $(this).addClass('fa-volume-mute');
        }else if($(this).hasClass('fa-volume-mute')){
            bgm.play();
            $(this).removeClass("fa-volume-mute");
            $(this).addClass("fa-volume-up");
        }
    });
    $('#music-on').on('click', function(){
        hideAnnounce();
        $('#audio-button').addClass('fa-volume-up');
        bgm.play();
    });
    $('#music-off').on('click', function(){
        hideAnnounce();
        $('#audio-button').addClass('fa-volume-mute');
    });
});
</script>
<script src="https://kit.fontawesome.com/81a1ab3943.js" crossorigin="anonymous"></script>
